{
  "name": "DevOps Dev Container",
  "build": {
    "dockerfile": "Dockerfile",
    "args": {
      "VARIANT": "1.17"
    }
  },
  "runArgs": [
    "--cap-add=SYS_PTRACE",
    "--security-opt",
    "seccomp=unconfined"
  ],
  "customizations": {
    "vscode": {
      "extensions": [
        "GitHub.copilot",
        "GitHub.copilot-chat",
        "actboy168.lua-debug",
        "donjayamanne.githistory",
        "eamodio.gitlens",
        "editorconfig.editorconfig",
        "elagil.pre-commit-helper",
        "fabiospampinato.vscode-git-history",
        "github.vscode-github-actions",
        "golang.go",
        "huizhou.githd",
        "keyring.Lua",
        "mhutchie.git-graph",
        "moshfeu.compare-folders",
        "ms-vscode.vs-gitlense-compare",
        "pprice.better-merge",
        "ryu1kn.partial-diff",
        "saoudrizwan.claude-dev",
        "sumneko.lua",
        "trixnz.vscode-lua",
        "vsls-contrib.gitdoc",
        "yinfei.luahelper",
      ],
      "settings": {
        "go.toolsManagement.checkForUpdates": "local",
        "go.useLanguageServer": true,
        "go.gopath": "/go",
        "Lua.telemetry.enable": false,
        "Lua.diagnostics.globals": ["vim"],
        "Lua.workspace.library": ["${3rd}/love2d/library"],
        "Lua.runtime.version": "LuaJIT",
        "Lua.workspace.checkThirdParty": false
      }
    }
  },
  "postCreateCommand": {
    "update": "sudo apt-get update",
    "install-deps": "sudo apt-get install -y build-essential lua5.3 lua5.3-dev luarocks ripgrep fd-find curl git python3 python3-pip python3-venv",
    "install-neovim": "curl -L https://github.com/neovim/neovim/releases/latest/download/nvim-linux64.tar.gz | sudo tar xzf - -C /opt",
    "link-neovim": "sudo ln -s /opt/nvim-linux64/bin/nvim /usr/local/bin/nvim",
    "install-luacheck": "sudo luarocks install luacheck",
    "install-python-tools": "sudo pip3 install pynvim",
    "configure-python": "sudo update-alternatives --install /usr/bin/python python /usr/bin/python3 1"
  },
  "remoteUser": "vscode",
  "containerUser": "vscode",
  "features": {
    "terraform": "latest",
    "azure-cli": "latest"
  }
}
